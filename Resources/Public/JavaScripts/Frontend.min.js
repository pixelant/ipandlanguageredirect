function IpandlanguageredirectFrontend() {
    "use strict";
    var e = this,
        n = "ipandlanguageredirect_container",
        t = "fadein",
        r = {
            r: 1
        },
        a = "temp",
        i = !1;
    this.initialize = function() {
        u(), o(), d(), C() && f(_(), x())
    };
    var u = function() {
            window.location.search.indexOf("ipandlanguagedebug=1") !== -1 && (i = !0, console.log("ipandlanguageredirect debug activated"))
        },
        o = function() {
            g(), c()
        },
        d = function() {
            l(), s()
        },
        g = function() {
            var e = A("data-ipandlanguageredirect-action", "hideMessage");
            for (var n in e)
                if (e.hasOwnProperty(n)) {
                    var t = e[n];
                    t.onclick = function() {
                        z(), w()
                    }
                }
        },
        c = function() {
            var e = L("h");
            "1" !== e && "3" !== e || (z(), w())
        },
        l = function() {
            var e = A("data-ipandlanguageredirect-action", "disableRedirect");
            for (var n in e)
                if (e.hasOwnProperty(n)) {
                    var t = e[n];
                    t.onclick = function() {
                        F()
                    }
                }
        },
        s = function() {
            var e = L("h");
            "2" !== e && "3" !== e || F()
        },
        f = function(e, n) {
            if (e) {
                var t = new XMLHttpRequest;


                if ( location.search ) {
                    var params = parse_query_string( decodeURI(location.search).split('?')[1] );

                    if ( params['tx_ipandlanguageredirect_pi1[ipAddress]'] ) {
                        n['tx_ipandlanguageredirect_pi1[ipAddress]'] = params['tx_ipandlanguageredirect_pi1[ipAddress]'];
                    }
                }
                

                t.onreadystatechange = function() {
                    if (4 === this.readyState && 200 === this.status) {
                        var e = JSON.parse(this.responseText);

                        if (e.activated == true && e.events[0] == 'redirect') {
                            location.href = e.redirectUri;
                        }

                        p(e)
                    }
                }, t.open("POST", E(e, n), !0), t.send()
            } else console.log("No ajax URI given!")
        },
        p = function(n) {
            if (n.activated && Array.isArray(n.events))
                for (var t in n.events) n.events.hasOwnProperty(t) && e[n.events[t] + "Event"](n)
        };
    this.redirectEvent = function(e) {
        if (j()) i && console.log("Cookie already set");
        else {
            var n = b(e.redirectUri);
            F(), i ? (console.log("Cookie set and redirect to following URI:"), console.log(n)) : window.location = n
        }
    }, this.suggestEvent = function(e) {
        if (!T()) {
            var n = b(e.redirectUri);
            i ? (console.log("Suggest the following URI:"), console.log(n)) : (v(e), h())
        }
    };
    var v = function(e) {
            var n = y("data-ipandlanguageredirect-container", "link");
            n.setAttribute("href", e.redirectUri)
        },
        h = function() {
            var e = y("data-ipandlanguageredirect-container", "suggest");
            e.classList.add(t)
        },
        w = function() {
            var e = y("data-ipandlanguageredirect-container", "suggest");
            e.classList.remove(t)
        },
        b = function(e) {
            return E(e, r)
        },
        _ = function() {
            var e = m();
            return null !== e ? e.getAttribute("data-ipandlanguageredirect-ajaxuri") : ""
        },
        m = function() {
            return document.getElementById(n)
        },
        y = function(e, n) {
            var t = A(e, n);
            for (var r in t)
                if (t.hasOwnProperty(r) && t[r].getAttribute(e) === n) return t[r];
            return null
        },
        A = function(e, n) {
            return document.querySelectorAll("[" + e + '="' + n + '"]')
        },
        x = function() {
            return {
                "tx_ipandlanguageredirect_pi1[browserLanguage]": I(),
                "tx_ipandlanguageredirect_pi1[ipAddress]": U(),
                "tx_ipandlanguageredirect_pi1[referrer]": k(),
                "tx_ipandlanguageredirect_pi1[languageUid]": P(),
                "tx_ipandlanguageredirect_pi1[rootpageUid]": R(),
                "tx_ipandlanguageredirect_pi1[countryCode]": S()
            }
        },
        I = function() {
            var e = null,
                n = m();
            return null !== n && (e = n.getAttribute("data-ipandlanguageredirect-browserlanguage")), null === e && (e = O()), e
        },
        O = function() {
            var e = navigator.language || navigator.userLanguage;
            void 0 !== navigator.languages && void 0 !== navigator.languages[0] && (e = navigator.languages[0]);
            var n = e.split("-");
            return n[0]
        },
        U = function() {
            var e = "",
                n = m();
            return null !== n && (e = n.getAttribute("data-ipandlanguageredirect-ipaddress")), e
        },
        k = function() {
            var e = null,
                n = m();
            return null !== n && (e = n.getAttribute("data-ipandlanguageredirect-referrer")), null === e && (e = document.referrer), e
        },
        P = function() {
            var e = m();
            if (null !== e) {
                var n = e.getAttribute("data-ipandlanguageredirect-languageuid");
                return parseInt(n)
            }
            return 0
        },
        R = function() {
            var e = m();
            if (null !== e) {
                var n = e.getAttribute("data-ipandlanguageredirect-rootpageuid");
                return parseInt(n)
            }
            return 1
        },
        S = function() {
            var e = m();
            if (null !== e) {
                var n = e.getAttribute("data-ipandlanguageredirect-countrycode");
                if (null !== n) return n
            }
            return ""
        },
        C = function() {
            var e = m();
            return null !== e && "1" !== L("r")
        },
        E = function(e, n) {
            for (var t in n) n.hasOwnProperty(t) && (e += e.indexOf("?") !== -1 ? "&" : "?", e += t + "=" + n[t]);
            return e
        },
        L = function(e) {
            var n = null,
                t = [];
            return window.location.search.substr(1).split("&").forEach(function(r) {
                t = r.split("="), t[0] === e && (n = decodeURIComponent(t[1]))
            }), n
        },
        T = function() {
            return "1" === M("ipandlanguageredirect_hidemessage")
        },
        j = function() {
            return "1" === M("ipandlanguageredirect_disableredirect")
        },
        q = function(e, n, t) {
            if ("permanent" === t) {
                var r = new Date,
                    a = r.getTime();
                a += 31536e6, r.setTime(a), document.cookie = e + "=" + n + "; expires=" + r.toUTCString() + "; path=/"
            } else document.cookie = e + "=" + n + "; path=/"
        },
        z = function() {
            q("ipandlanguageredirect_hidemessage", "1", a)
        },
        F = function() {
            q("ipandlanguageredirect_disableredirect", "1", a)
        },
        M = function(e) {
            for (var n = e + "=", t = document.cookie.split(";"), r = 0; r < t.length; r++) {
                for (var a = t[r];
                    " " === a.charAt(0);) a = a.substring(1);
                if (0 === a.indexOf(n)) return a.substring(n.length, a.length)
            }
            return ""
        },
        parse_query_string = function(query) {
          var vars = query.split("&");
          var query_string = {};
          for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            // If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
              query_string[pair[0]] = decodeURIComponent(pair[1]);
              // If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
              var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];
              query_string[pair[0]] = arr;
              // If third or later entry with this name
            } else {
              query_string[pair[0]].push(decodeURIComponent(pair[1]));
            }
          }
          return query_string;
        }
}
var Ipandlanguageredirect = new window.IpandlanguageredirectFrontend;
Ipandlanguageredirect.initialize();